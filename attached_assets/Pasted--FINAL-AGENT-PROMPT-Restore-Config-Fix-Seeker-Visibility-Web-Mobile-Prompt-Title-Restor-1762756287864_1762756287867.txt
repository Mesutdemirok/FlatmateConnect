
ğŸ§  FINAL AGENT PROMPT â€” Restore Config + Fix Seeker Visibility (Web + Mobile)

Prompt Title: Restore Config and Fix Seeker Listing Visibility Across Web + Mobile

â¸»

Context Summary

We have a working Odanet project (web + Expo mobile) where:
	â€¢	/api/users/seekers and /api/listings endpoints are both live and respond correctly.
	â€¢	On mobile (Expo), the unified feed now shows seekers but not their images or detail pages.
	â€¢	On the website, seeker listings completely disappeared (likely due to route or database filter issues).
	â€¢	The config.ts file was accidentally deleted and must be restored so both platforms can correctly access the live API.

â¸»

ğŸ”§ Tasks to Fix Everything
	1.	Restore and Position Config File
	â€¢	Create /workspace/config.ts with the following content:

export const API_URL =
  process.env.NODE_ENV === "production"
    ? "https://www.odanet.com.tr"
    : "http://localhost:5000";


	â€¢	Update all hooks (useSeekers.ts, useListings.ts, etc.) to import it properly:

import { API_URL } from "../../config";


	â€¢	Confirm there is only one config.ts file in the project root (not inside subfolders).

â¸»

	2.	Fix Website Seeker Visibility
	â€¢	In server/routes (inside registerRoutes):
	â€¢	Ensure the route /api/seekers/public or /api/seekers exists and returns all isActive: true and isPublished: true seeker profiles:

app.get("/api/seekers", async (req, res) => {
  try {
    const seekers = await storage.getSeekerProfiles({
      isPublished: true,
      isActive: true,
    });
    res.json(seekers);
  } catch (err) {
    console.error("âŒ /api/seekers error:", err);
    res.status(500).json({ message: "VeritabanÄ± hatasÄ±" });
  }
});


	â€¢	Make sure this route is registered before /api/users/:userId to avoid Express routing conflicts.
	â€¢	Redeploy backend after update and verify that this URL works:
ğŸ‘‰ https://www.odanet.com.tr/api/seekers

â¸»

	3.	Fix Mobile SeekerCard Rendering
	â€¢	In /odanet-mobile/components/SeekerCard.tsx:
	â€¢	Confirm image is displayed using:

{seeker.profilePhotoUrl ? (
  <Image
    source={{ uri: `${API_URL}${seeker.profilePhotoUrl}` }}
    style={styles.image}
    resizeMode="cover"
  />
) : (
  <Ionicons name="person-circle-outline" size={48} color="#ccc" />
)}


	â€¢	Add navigation to the seeker detail page:

onPress={() => router.push(`/seeker/${seeker.id}`)}


	â€¢	Ensure detail screen (app/seeker/[id].tsx) exists and fetches data from:

`${API_URL}/api/seekers/${id}`



â¸»

	4.	Verify Database Filters
	â€¢	In storage.getSeekerProfiles(), confirm that it doesnâ€™t filter out valid seekers incorrectly.
	â€¢	It should include all where:

isActive: true,
isPublished: true

and return with related user fields (firstName, lastName).

â¸»

	5.	Final Check
	â€¢	Restart both servers:

# Backend
npm run dev
# Mobile
cd odanet-mobile && npx expo start --tunnel --clear


	â€¢	Confirm:
	â€¢	âœ… On web: seekers reappear at /oda-arayan and homepage.
	â€¢	âœ… On mobile: seeker images and detail pages now open correctly.

â¸»

âœ… Goal

After this fix:
	â€¢	The website will again display all seeker profiles publicly.
	â€¢	The mobile app will display full seeker cards (with profile image + details).
	â€¢	Both share one consistent, correct config.ts file pointing to the live backend.

