

âœ… FINAL AGENT PROMPT â€” â€œUnify Seekers + Listings Feed Fixâ€

Prompt Title: Fix Expo Mobile Unified Feed and Config Path

â¸»

Context Summary (Current State):
	â€¢	The mobile Expo app (odanet-mobile) successfully runs via npx expo start --tunnel --clear.
	â€¢	The app is already showing â€œTÃ¼m Ä°lanlarâ€ with real listings from /api/listings.
	â€¢	The seeker API (https://www.odanet.com.tr/api/users/seekers) is working live and returns valid JSON { "seekers": [...] }.
	â€¢	The backend and routes are deployed correctly.
	â€¢	Problem: The mobile app still doesnâ€™t show seeker cards in the unified home feed.
	â€¢	Likely cause: config.ts file is in the wrong place, incorrect import paths (../config instead of ../../config), or missing export consistency between seekers and listings.
	â€¢	Goal: Fully automate the file arrangement and data merging so seekers display along with listings on the home page chronologically.

â¸»

Tasks for the Agent:
	1.	Move and organize files properly:
	â€¢	Ensure there is exactly one config.ts file at the project root (not inside odanet-mobile).
Example path: /workspace/config.ts
	â€¢	Inside it, define:

export const API_URL = "https://www.odanet.com.tr";


	â€¢	Fix all imports in /odanet-mobile/hooks/ to use:

import { API_URL } from "../../config";

(This applies to useSeekers.ts, useListings.ts, and any similar files.)

	2.	Fix the useSeekers.ts hook:
	â€¢	Ensure it fetches from the correct live endpoint:

${API_URL}/api/users/seekers


	â€¢	Parse both array and object responses gracefully:

return Array.isArray(json) ? json : json.seekers || [];


	â€¢	Log success and error messages clearly in Expo logs.

	3.	Verify SeekerCard export:
	â€¢	Confirm SeekerCard is a named export:

export function SeekerCard() { ... }

and not a default export.

	â€¢	If default, adjust imports in /app/(tabs)/index.tsx to match.

	4.	Unify the Home Feed:
	â€¢	In /odanet-mobile/app/(tabs)/index.tsx, ensure that:

combinedFeed = [...listingsWithType, ...seekersWithType]
  .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));


	â€¢	For rendering:

{combinedFeed.map((item) =>
  item.type === "listing"
    ? <ListingCard key={`listing-${item.id}`} listing={item} />
    : <SeekerCard key={`seeker-${item.id}`} seeker={item} />
)}


	5.	Test and Confirm:
	â€¢	Run the app with:

cd odanet-mobile && npx expo start --tunnel --clear


	â€¢	Ensure the console shows:

ðŸ“¡ Fetching seekers from https://www.odanet.com.tr/api/users/seekers
âœ… Seekers fetched: X
âœ… Listings fetched: Y


	â€¢	Verify the home feed displays both room listings and room seekers, mixed chronologically.

	6.	Clean & Document:
	â€¢	Remove unused imports or duplicate config files.
	â€¢	Add a short summary comment at the top of useSeekers.ts:

// âœ… Unified feed: Fetches real seekers data from live Odanet backend



â¸»
