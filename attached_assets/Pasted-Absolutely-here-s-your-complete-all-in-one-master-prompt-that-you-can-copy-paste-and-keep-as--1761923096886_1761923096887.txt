Absolutely âœ… â€” hereâ€™s your complete, all-in-one master prompt that you can copy, paste, and keep as your permanent fix tool for Odanetâ€™s backend.

This single prompt combines Phase 1 (Fix) + Phase 2 (Verify) + Phase 3 (Recover).
It tells the agent exactly what to do, what not to touch, and what the end state should look like.

â¸»

ğŸ§© ODANET â€” FULL DATABASE + OAUTH FIX PROMPT

Prompt:

â¸»

ğŸ”§ Context

The Odanet app is connected to the Neon production database but throws
error: column "email_verified_at" does not exist and
VeritabanÄ± hatasÄ± oluÅŸtu.
This means the production database schema is out of sync with the current Drizzle ORM models.

ğŸ¯ Goal

Synchronize the Neon production database schema with Drizzle ORM, verify all API routes and OAuth redirects, and prepare a self-healing setup for future schema drift.
Do not reset passwords, OAuth credentials, or re-deploy the app.

â¸»

ğŸª„ STEP 1 â€” Fix (Migration / Schema Sync)
	1.	Connect to the existing Neon production DB using this connection string:

postgresql://neondb_owner:npg_xHrRZ2cq4GEFh@ep-noisy-sun-afcx37wr-pooler.c-2.us-west-2.aws.neon.tech/neondb?sslmode=require


	2.	Run a schema comparison between Drizzle ORM and the current database.
	3.	Apply any missing migrations to align tables and columns, especially:
	â€¢	add email_verified_at TIMESTAMP to the users table
	â€¢	apply all other pending migrations.
	4.	Example commands (run whichever applies):

npx drizzle-kit push:pg

or

npm run db:push


	5.	Confirm successful output:

âœ… Migration applied successfully.
âœ… email_verified_at column added.



â¸»

ğŸ§­ STEP 2 â€” Verify (Functional Check)

After migrations finish:
	1.	Test these endpoints:
	â€¢	/api/seekers/public â†’ expect 200 OK + JSON array
	â€¢	/api/listings â†’ expect 200 OK + listings data
	2.	Confirm the users table now contains email_verified_at.
	3.	Test Google OAuth:
	â€¢	Open https://www.odanet.com.tr/giris
	â€¢	Click â€œGoogle ile devam etâ€
	â€¢	Allow access
	â€¢	Expect redirect â†’ /profil
	4.	Expected console log:

âœ… API /api/seekers/public â†’ 200 OK
âœ… API /api/listings â†’ 200 OK
âœ… Database synced (email_verified_at confirmed)
âœ… OAuth redirect â†’ /profil successful



â¸»

â™»ï¸ STEP 3 â€” Recovery / Self-Healing Routine

If this issue ever happens again (e.g. â€œVeritabanÄ± hatasÄ± oluÅŸtuâ€ or missing columns):
	1.	Re-use the same DB connection string above (no password reset).
	2.	Run schema validation and, if needed, re-apply migrations:

npx drizzle-kit push:pg


	3.	Log:
	â€¢	âœ… Database connection status
	â€¢	âœ… Schema verification result
	â€¢	âœ… Migration summary
	4.	Confirm that /api/seekers/public and /api/listings return 200 OK.
	5.	Do not modify OAuth, JWT, or Cloudflare R2 configs.

Expected final output:

âœ… Connected to Neon successfully
âœ… Schema synced to latest Drizzle models
âœ… All API routes responding 200 OK
âœ… Google OAuth redirect working


â¸»

ğŸš« DO NOT
	â€¢	Reset or recreate the database
	â€¢	Change secrets (FRONTEND_URL, GOOGLE_*, JWT_SECRET)
	â€¢	Modify file storage or Cloudflare settings

â¸»

âœ… DONE WHEN
	â€¢	/api/listings and /api/seekers/public return 200 OK
	â€¢	No â€œcolumn missingâ€ or â€œVeritabanÄ± hatasÄ± oluÅŸtuâ€ logs
	â€¢	Google OAuth login â†’ redirects to /profil
	â€¢	Console shows:

âœ… Migration applied successfully
âœ… Connected to database: ep-noisy-sun-afcx37wr-pooler...
âœ… Server running on port 5000



â¸»


â¸»

ğŸ’¡ How to use it:
	â€¢	Paste this entire prompt into your Replit agent.
	â€¢	Wait for it to finish (usually < 2 minutes).
	â€¢	Then test your site: https://www.odanet.com.trï¿¼

This one prompt covers everything â€” itâ€™ll fix, verify, and future-proof your database + OAuth integration in a single run.