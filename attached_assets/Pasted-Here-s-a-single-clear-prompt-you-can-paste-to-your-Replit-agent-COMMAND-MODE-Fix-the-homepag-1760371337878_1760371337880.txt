Here’s a single, clear prompt you can paste to your Replit agent.

⸻

[COMMAND MODE]
Fix the homepage search, data wiring, and messaging UI. Apply the changes below end-to-end, test in Preview, and keep all copy 100% Turkish.

⸻

1) Arama Kutusu – Görsel Düzeltme ve Konum

Goal: Kontrastı yüksek, mobil-öncelikli bir arama alanı; Hero metninin hemen altında ve Güncel İlanlar bölümünün üstünde yer alacak.

Do:
	•	ui/SearchFilters.tsx yerine yeni bir bileşen oluştur: ui/SearchBar.tsx.
	•	Arka planı bg-white, yazı rengi text-slate-800, yer tutucu placeholder-slate-400 olsun.
	•	Kenarlık/odak stilleri: rounded-2xl ring-1 ring-black/10 focus-within:ring-2 focus-within:ring-indigo-500.
	•	Mobilde tek satır, desktop’ta “input + Ara” yan yana.
	•	Hero içine ekleme noktası:
	•	ui/Hero.tsx (veya Hero kullanan sayfa) içinde, başlık ve açıklama bloğunun altına <SearchBar /> yerleştir.

Acceptance:
	•	iOS/Android dar ekranlarda metinler net, yer tutucu görünüyor.
	•	Safari/Chrome’da kontrast hatası yok (Lighthouse “contrast” uyarısı çıkmıyor).

⸻

2) Arama Modeli – Sekmeli “Ne arıyorsun?” ve Akıllı Girdi

Goal: Kullanıcı tek bir akıllı kutudan arama yapabilsin; “Oda İlanları” veya “Oda Arayanlar” arasında kolay geçiş yapsın.

Do:
	•	SearchBar içinde iki sekme:
	•	Oda İlanları (type=listing)
	•	Oda Arayanlar (type=seeker)
	•	Tek bir metin girişi: yer tutucu “Semt, ilçe ya da mahalle yazın…”
Yazdıkça; il / ilçe / mahalle önerileri çıkar (autocomplete).
	•	“Ara” tıklanınca /arama?type=listing|seeker&q=<query>&il=<slug>&ilce=<slug>&mahalle=<slug> sayfasına yönlendir.

Notes (autocomplete):
	•	Statik TR konum veri kaynağı ekleyin: shared/tr-locations.ts
	•	En azından İstanbul’un tüm ilçeleri ve mahalle örnekleri; mümkünse tüm iller+ilçeler.
	•	Slug üretimi: küçük harf, Türkçe karakterler sadeleştirilmiş (ör: “Şişli” → sisli).
	•	Girilen metinden il/ilçe/mahalle çıkarımı için basit normalizasyon fonksiyonu:
normalizeTr(str) (ş→s, ğ→g, ü→u, ö→o, ç→c, ı→i; harf/digit dışı kaldır).

Acceptance:
	•	Sekmeler çalışıyor; durum URL’ye type olarak yansıyor.
	•	Yazarken öneriler geliyor; seçince input dolduruluyor.
	•	“Ara” sonrası /arama sayfasında başlıkta seçilen konum breadcrumb’ı görünüyor (ör. “İstanbul / Kadıköy”).

⸻

3) Arama Sonuçları – Veriye Bağla

Goal: Arama, gerçek listeleri döndürsün (daha önce “bağlantı yok” sorunu vardı).

Do (backend):
	•	/api/search endpoint’i ekle/iyileştir.
	•	Parametreler: type (listing|seeker), il, ilce, mahalle, q.
	•	Tablolarda (listings, seekers) normalize edilmiş alanlar bulunsun (örn: city_slug, district_slug, neighborhood_slug). Yoksa migration ile ekleyin ve mevcut veriyi doldurun.
	•	Filtreleme önceliği: mahalle → ilçe → il; ek olarak başlık/metin içinde q ILIKE eşleşmesi.
	•	Performans için city_slug, district_slug index (btree) ekleyin.

Do (frontend):
	•	pages/arama.tsx (veya mevcut arama sayfası)
	•	type=listing için: ListingCard grid’i
	•	type=seeker için: SeekerCard grid’i
	•	“Bu bölgede sonuç bulunamadı” boş durum kartı (ikon + açıklama).

Acceptance:
	•	İstanbul/Kadıköy’de oluşturduğumuz test ilan aramada çıkıyor.
	•	“Önceden düzeltildi” denilen bağlantısızlık tamamen giderildi.

⸻

4) İstanbul İlçe Listesi – Eksiksiz Doldurma

Goal: İlçe listeleri eksiksiz olsun; sadece birkaç ilçe gelme problemi bitirilsin.

Do:
	•	shared/tr-locations.ts içine İstanbul tam ilçe listesi ekleyin (en az şunlar):
Adalar, Arnavutköy, Ataşehir, Avcılar, Bağcılar, Bahçelievler, Bakırköy, Başakşehir, Bayrampaşa, Beşiktaş, Beykoz, Beylikdüzü, Beyoğlu, Büyükçekmece, Çatalca, Çekmeköy, Esenler, Esenyurt, Eyüpsultan, Fatih, Gaziosmanpaşa, Güngören, Kadıköy, Kağıthane, Kartal, Küçükçekmece, Maltepe, Pendik, Sancaktepe, Sarıyer, Silivri, Sultanbeyli, Sultangazi, Şile, Şişli, Tuzla, Ümraniye, Üsküdar, Zeytinburnu.
	•	Aynı mantıkla (zaman elverdiği ölçüde) büyük illeri ekleyin. Gerekirse geri kalanları biz sağlayacağız.

Acceptance:
	•	İl=İstanbul seçildiğinde tüm ilçeler listeleniyor.

⸻

5) “Oda Arayanlar” Kartı – Alt Bilgi Düzeni ve Görsel

Goal: Kart altındaki bilgi satırı sade ve net olsun; mobilde fotoğraf daha baskın.

Do:
	•	ui/FeaturedRoomSeekers.tsx ve seeker kart bileşeni:
	•	Alt bilgi şablonu: “İsim Soyad (ilk harf), Aradığı Lokasyon(lar)”
Örn: “Memet D. – Şişli, Eminönü”.
	•	Bütçe/rozetler bu satıra girmesin (gerekirse küçük chip’ler; max 2).
	•	Kart görseli mobilde biraz daha yüksek (ör. h-[220px]) ve kenarlar rounded-2xl.
	•	Satırlar arası boşluk küçült, metinler text-slate-800 / text-slate-600.

Acceptance:
	•	Mobilde daha temiz, fotoğraf önde, alt satır tek satırda (truncate) net görünüyor.

⸻

6) Mesajlaşma Sayfası – Baştan Tasarla (Modern, WhatsApp benzeri)

Goal: Mevcut mesaj ekranı dağınık. Modern, anlaşılır bir arayüz.

Do:
	•	/mesajlar için yeni düzen:
	•	Mobil:
	•	İlk görünüm: “Henüz mesajınız yok / Konuşma başlat” boş durumu.
	•	Bir sohbete girince: tek sütun, üstte karşı ad/ilk harf avatar, altta pürüzsüz scroll’lu mesaj listesi, en altta sabit giriş alanı.
	•	Desktop:
	•	Sol: Konuşma listesi (son mesaj, saat, okunmamış rozet)
	•	Sağ: aktif sohbet.
	•	Mesaj balonları: bizim (sağda, bg-indigo-600 text-white) / karşı (solda, bg-slate-100)
Zaman etiketi küçük gri.
	•	Mesaj giriş alanı: textarea (tek satır; taşınca büyüyen) + ekle/emoji (opsiyonel) + Gönder butonu.
disabled/loading durumları net.
	•	Sosyal ikonları bu sayfadan kaldır → footer’da kalacak.
	•	“Yükleniyor…” iskeletleri (skeleton) ile yer tutucu.
	•	Hata durumunda toast + otomatik tekrar deneme.

Acceptance:
	•	Mobil/desktop akışı anlaşılır, ikonlar doğru yerde, gönderme/okuma sorunsuz.

⸻

7) Ek UX & Erişilebilirlik
	•	Tüm yeni input’larda aria-label, butonlarda aria-pressed/aria-controls (sekme).
	•	Boş durum bileşenleri (arama ve mesajlar) ikon + kısa açıklama.
	•	Türkçe metinler i18n yerine sabit Türkçe (i18n tamamen kaldırılana kadar).

⸻

8) Test & Doğrulama
	•	Manuel testler:
	1.	İstanbul/Kadıköy test ilanı oluştur → /arama?type=listing&q=kadikoy ile bulunmalı.
	2.	Bir “oda arayan” profili oluştur → /arama?type=seeker&q=sisli ile bulunmalı.
	3.	Arama çubuğu sekmesi değişince sonuç tipi değişmeli.
	4.	Mobil önizleme: arama kutusu kontrastı net görünmeli.
	•	Kod yerleri (muhtemel):
	•	Yeni: client/src/components/ui/SearchBar.tsx, client/src/shared/tr-locations.ts
	•	Güncellenecek: ui/Hero.tsx, pages/arama.tsx, ui/FeaturedRoomSeekers.tsx, ui/ListingCard.tsx (boş durum), pages/mesajlar.tsx
	•	Backend: server/routes/search.ts (veya mevcut arama endpoint), veri normalizasyonu/migration’lar.
	•	Lighthouse’ta contrast uyarısı olmamalı. Konsolda hata olmayacak.

⸻

Done = True when
	•	Arama çubuğu Hero altında, kontrastlı ve çalışır.
	•	İstanbul ilçe listesi eksiksiz.
	•	Arama sonuçları gerçek veriyi döndürüyor (listing & seeker).
	•	“Oda Arayanlar” kartları düzenli ve mobilde fotoğraf odaklı.
	•	Mesajlaşma sayfası modern, net ve hatasız.

Lütfen tüm değişiklikleri yapın, Preview’da test edin ve kısa bir “neler değişti” özeti bırakın.