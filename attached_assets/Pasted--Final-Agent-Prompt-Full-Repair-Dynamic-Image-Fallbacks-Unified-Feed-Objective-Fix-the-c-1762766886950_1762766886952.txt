

üöÄ Final Agent Prompt ‚Äî Full Repair + Dynamic Image Fallbacks + Unified Feed

Objective:
Fix the config import issue, ensure both room and seeker listings display correctly in the mobile app and website, and implement unique fallback images for seekers without profile photos.

‚∏ª

1. Remove duplicate config file
Delete this incorrect file:

/workspace/odanet-mobile/config.ts

Keep the real one at:

/workspace/config.ts


‚∏ª

2. Paste this final version into /workspace/config.ts:

// üåç Global API configuration for Odanet (shared by web + mobile)
export const API_URL =
  process.env.NODE_ENV === "production"
    ? "https://www.odanet.com.tr"
    : "http://localhost:5000";

/**
 * üñºÔ∏è Ensures consistent absolute image URLs across platforms
 * Adds dynamic fallback photos for seekers without uploaded images.
 */
export function getImageUrl(path?: string, type: "listing" | "seeker" = "listing", id?: string): string {
  if (path && path.startsWith("http")) return path;
  if (path) return `${API_URL}${path.startsWith("/") ? path : `/${path}`}`;

  // Generate unique fallback photos based on seeker ID hash (ensures variety)
  if (type === "seeker") {
    const fallbackImages = [
      "https://cdn.odanet.com.tr/placeholders/seeker1.jpg",
      "https://cdn.odanet.com.tr/placeholders/seeker2.jpg",
      "https://cdn.odanet.com.tr/placeholders/seeker3.jpg",
      "https://cdn.odanet.com.tr/placeholders/seeker4.jpg",
      "https://cdn.odanet.com.tr/placeholders/seeker5.jpg",
    ];
    const index = id ? id.charCodeAt(0) % fallbackImages.length : Math.floor(Math.random() * fallbackImages.length);
    return fallbackImages[index];
  }

  // Default fallback for listings
  return "https://cdn.odanet.com.tr/placeholders/listing-default.jpg";
}

üü¢ This version:
	‚Ä¢	Uses one config.ts across both platforms
	‚Ä¢	Adds 5 different placeholder images for seekers
	‚Ä¢	Selects a random fallback based on each seeker‚Äôs id for natural variation

‚∏ª

3. Fix all imports in mobile app
Search the entire /odanet-mobile directory and fix every config import.

‚úÖ Correct import format:

import { API_URL, getImageUrl } from "../../config";

Fix files including:
	‚Ä¢	/odanet-mobile/components/ListingCard.tsx
	‚Ä¢	/odanet-mobile/components/SeekerCard.tsx
	‚Ä¢	/odanet-mobile/hooks/useListings.ts
	‚Ä¢	/odanet-mobile/hooks/useSeekers.ts
	‚Ä¢	/odanet-mobile/app/(tabs)/index.tsx

‚∏ª

4. Validate backend API endpoints
Before rebuilding Expo, confirm these APIs return live JSON data:

GET https://www.odanet.com.tr/api/seekers/public
GET https://www.odanet.com.tr/api/listings

They must return objects with id, slug, createdAt, and image fields.
If either 404s, fix backend route mappings first.

‚∏ª

5. Clean Expo build
After fixes, run:

cd odanet-mobile && npx expo start --tunnel --clear

Then scan the QR code again with Expo Go.

‚∏ª

6. Verify full functionality
Make sure the following are working in the app:
	‚Ä¢	‚úÖ Unified home feed mixing seekers + listings
	‚Ä¢	‚úÖ Images visible for both listings and seekers (unique placeholders when missing)
	‚Ä¢	‚úÖ /listing/[id].tsx detail page shows full title, price, image, and ‚Äúilan sahibi‚Äù info
	‚Ä¢	‚úÖ /seeker/[id].tsx shows full name, photo, bio, and preferences
	‚Ä¢	‚úÖ No more ‚Äúilan bulunamadƒ±‚Äù anywhere
	‚Ä¢	‚úÖ API_URL points to the correct environment automatically

‚∏ª

7. Confirm success
All done when:
	‚Ä¢	Both web and mobile show real listings and seekers
	‚Ä¢	Expo app builds cleanly with no red screens
	‚Ä¢	Each seeker profile card has a distinct fallback image
	‚Ä¢	No config import or API route errors remain

‚∏ª

Title:
Fix Config Imports, Validate APIs, and Add Smart Fallback Images for Odanet Mobile

Goal:
Achieve a unified, visually complete app where seekers and listings load dynamically with distinct fallback images and working detail pages.

